10 'Converted with MSX Basic Dignified
20 'https://github.com/farique1/msx-basic-dignified
30 OPEN"grp:"AS#1:DEFINTA-Z
40 DEFUSR1=&H41:DEFUSR2=&H44
50 GOSUB760
60 GOSUB790
70 GOSUB820
80 GOSUB130
90 GOSUB460
100 GOSUB160
110 GOSUB510
120 GOTO100
130 GOSUB210
140 GOSUB190
150 RETURN
160 IFMCTHENGOSUB210
170 GOSUB190
180 RETURN
190 PUTSPRITEPS,(PX,PY),,PP
200 RETURN
210 A=USR1(0)
220 CLS:MC=0:PRESET(0,0):PRINT#1,"Cargando level "MS
230 _TURBOON(TN,M(),MS)
240 FORF=0TO12
250 FORC=0TO15
260 TN=M(F,C,MS)
270 IFTN>=0ANDTN<=15THENCOPY(TN*16,0*16)-((TN*16)+16,(0*16)+16),1TO(C*16,F*16)
280 IFTN>15ANDTN<=31THENCOPY((TN-16)*16,1*16)-(((TN-16)*16)+16,(1*16)+16),1TO(C*16,F*16)
290 IFTN>31ANDTN<=47THENCOPY((TN-32)*16,2*16)-(((TN-32)*16)+16,(2*16)+16),1TO(C*16,F*16)
300 IFTN>47ANDTN<=63THENCOPY((TN-48)*16,3*16)-(((TN-48)*16)+16,(3*16)+16),1TO(C*16,F*16)
310 IFTN>63ANDTN<=79THENCOPY((TN-64)*16,4*16)-(((TN-64)*16)+16,(4*16)+16),1TO(C*16,F*16)
320 IFTN>79ANDTN<=95THENCOPY((TN-80)*16,5*16)-(((TN-80)*16)+16,(5*16)+16),1TO(C*16,F*16)
330 IFTN>95ANDTN<=111THENCOPY((TN-96)*16,6*16)-(((TN-96)*16)+16,(6*16)+16),1TO(C*16,F*16)
340 IFTN>111ANDTN<=127THENCOPY((TN-112)*16,7*16)-(((TN-112)*16)+16,(7*16)+16),1TO(C*16,F*16)
350 IFTN>127ANDTN<=143THENCOPY((TN-128)*16,8*16)-(((TN-128)*16)+16,(8*16)+16),1TO(C*16,F*16)
360 IFTN>143ANDTN<=159THENCOPY((TN-144)*16,9*16)-(((TN-144)*16)+16,(9*16)+16),1TO(C*16,F*16)
370 IFTN>159ANDTN<=175THENCOPY((TN-160)*16,10*16)-(((TN-160)*16)+16,(10*16)+16),1TO(C*16,F*16)
380 IFTN>175ANDTN<=191THENCOPY((TN-176)*16,11*16)-(((TN-176)*16)+16,(11*16)+16),1TO(C*16,F*16)
390 IFTN>191ANDTN<=207THENCOPY((TN-192)*16,12*16)-(((TN-192)*16)+16,(12*16)+16),1TO(C*16,F*16)
400 NEXTC
410 NEXTF
420 _TURBOOFF
430 A=USR2(0)
440 PRESET(0,0):PRINT#1,"Level "MS"           "
450 RETURN
460 STRIG(0)ON
470 ONSTRIGGOSUB780
480 RETURN
490 ONSTICK(0)GOSUB650,490,570,490,690,490,610
500 RETURN
510 J=STICK(0)
520 IFJ=3THENGOSUB570
530 IFJ=7THENGOSUB610
540 IFJ=1THENGOSUB650
550 IFJ=5THENGOSUB690
560 RETURN
570 PX=PX+PV
580 PP=1
590 GOSUB730
600 RETURN
610 PX=PX-PV
620 PP=3
630 GOSUB730
640 RETURN
650 PY=PY-PV
660 PP=7
670 GOSUB730
680 RETURN
690 PY=PY+PV
700 PP=5
710 GOSUB730
720 RETURN
730 IFPX>=255-PWORPX<0ORPY<0ORPY>212-PHTHENPX=0:MS=MS+1:MC=1:PUTSPRITEPS,(0,-32),,PP
740 IFMS>=MM-1THENMS=0
750 RETURN
760 PX=100:PY=212-16-16-16:PW=16:PH=16:PD=3:PU=0:PV=10:PE=100:PC=0:PP=1:PS=1
770 RETURN
780 RETURN
790 MS=0:MM=5:MC=0:TN=-1
800 DIMM(12,15,MM-1)
810 RETURN
820 FORI=0TOMM-1
830 FORF=0TO12
840 FORC=0TO15
850 READA$
860 M(F,C,I)=VAL(A$)
870 NEXTC
880 NEXTF
890 NEXTI
900 RETURN
910 FORI=0TOMM-1
920 FORF=0TO12
930 FORC=0TO15
940 PRINT#1,M(F,C,MS);
950 NEXTC
960 PRINT#1,""
970 NEXTF
980 PRINT#1,"mapa: "MS
990 NEXTI
1000 RETURN
1010 IFTN>=0ANDTN<=15THENCOPY(TN*16,0*16)-((TN*16)+16,(0*16)+16),1TO(CO*16,FI*16)
1020 RETURN
1030 DATA0,0,0,0,0,0,0,0,135,9,10,0,0,0,0,0
1040 DATA0,144,145,145,145,146,145,147,135,25,26,0,0,0,0,0
1050 DATA0,160,1,0,0,0,1,163,135,0,0,0,197,198,190,191
1060 DATA0,160,1,188,189,0,1,163,135,0,0,0,204,205,206,207
1070 DATA0,160,1,204,205,0,1,163,135,0,0,0,0,135,0,0
1080 DATA0,160,1,0,52,0,1,163,135,0,0,0,0,135,9,10
1090 DATA0,160,1,0,52,0,3,163,135,0,0,0,0,135,25,26
1100 DATA0,176,177,177,177,178,177,179,151,152,152,152,152,151,152,152
1110 DATA0,0,0,0,0,135,0,0,135,17,202,203,17,17,17,17
1120 DATA0,0,9,10,0,135,0,0,135,17,205,206,0,0,0,0
1130 DATA0,0,25,26,0,135,0,0,135,17,0,135,17,17,17,17
1140 DATA152,152,152,152,152,151,152,152,151,152,152,151,152,152,152,152
1150 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1160 DATA0,0,0,0,0,33,0,135,0,0,0,192,193,194,0,0
1170 DATA33,0,0,0,0,0,0,135,0,0,0,192,193,194,0,0
1180 DATA0,0,0,96,97,98,0,135,0,0,0,192,193,194,0,0
1190 DATA0,0,0,112,113,114,0,135,0,0,0,192,181,194,0,0
1200 DATA0,0,0,128,129,130,0,135,0,0,0,0,0,0,0,0
1210 DATA0,0,0,0,0,0,0,135,0,33,0,0,67,0,0,0
1220 DATA150,150,150,150,150,150,150,151,152,152,152,152,152,152,152,152
1230 DATA0,0,0,0,0,0,0,167,33,0,0,0,0,2,2,2
1240 DATA0,99,100,101,0,0,0,135,0,0,99,100,101,2,2,2
1250 DATA0,115,116,117,0,0,0,135,0,33,115,116,117,0,2,2
1260 DATA0,131,132,133,0,0,0,135,0,0,131,132,133,0,2,2
1270 DATA0,0,0,33,0,0,0,135,0,0,0,0,0,0,2,2
1280 DATA0,0,0,0,0,0,0,135,0,0,0,33,0,0,2,2
1290 DATA17,0,0,33,0,0,0,0,33,0,0,0,0,0,0,17
1300 DATA17,33,33,0,0,33,33,0,0,0,0,0,0,0,33,17
1310 DATA33,180,180,180,180,180,180,180,180,180,180,180,180,0,0,17
1320 DATA17,180,126,126,126,126,88,89,126,67,126,79,180,0,33,17
1330 DATA17,180,126,126,126,126,104,105,126,71,72,73,180,0,0,17
1340 DATA33,180,126,126,86,126,126,56,126,126,56,126,180,0,0,17
1350 DATA17,180,126,126,102,126,126,56,39,40,56,87,180,17,17,17
1360 DATA17,180,180,126,126,126,126,126,126,56,126,103,180,17,33,0
1370 DATA33,17,180,180,180,180,180,180,180,56,180,180,180,17,33,0
1380 DATA0,17,17,17,17,17,17,17,180,119,180,17,17,17,0,0
1390 DATA0,141,142,143,0,0,0,0,17,135,17,141,142,143,0,0
1400 DATA152,152,152,152,152,152,152,152,152,151,152,152,152,152,152,152
1410 DATA0,0,0,0,0,0,0,0,0,167,0,0,0,0,0,0
1420 DATA0,135,0,0,9,10,0,1,0,0,9,10,0,0,0,0
1430 DATA0,135,16,0,25,26,1,0,16,0,25,26,0,0,11,0
1440 DATA0,135,0,16,0,1,0,0,16,0,0,0,0,27,0,0
1450 DATA0,151,152,152,152,152,152,152,152,152,152,151,152,152,152,152
1460 DATA0,0,0,16,0,50,0,16,0,0,0,135,50,0,0,0
1470 DATA0,9,10,16,0,0,0,9,10,0,0,135,0,9,10,0
1480 DATA0,25,26,16,1,0,0,25,26,0,0,135,0,25,26,0
1490 DATA0,0,0,0,0,0,0,0,0,11,0,135,0,0,0,0
1500 DATA0,16,16,0,27,0,0,0,1,0,0,135,0,50,0,0
1510 DATA152,152,152,152,152,152,152,152,152,152,152,151,152,152,152,152
1520 DATA0,9,10,0,0,0,0,0,0,9,10,0,0,0,0,16
1530 DATA0,25,26,0,16,0,0,50,0,25,26,0,0,0,16,0
1540 DATA0,0,0,0,0,0,16,0,0,0,0,0,0,11,16,0
1550 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1560 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1570 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1580 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1590 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1600 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1610 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1620 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1630 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1640 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1650 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1660 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1670 DATA0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
